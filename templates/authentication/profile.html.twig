{% extends 'base.html.twig' %}

{% block body %}
{% block navbar %}{{ parent() }}{% endblock %}

<div class="container directory-container">
    <div class="matrix-card">
        <div class="matrix-card-header d-flex justify-content-between align-items-center">
            <h2 class="matrix-title m-0">
                <span class="matrix-glow">></span> OPERATOR_DOSSIER
            </h2>
            {% if is_granted('ROLE_ADMIN') or app.user == user %}
                <a href="{{ path('updateUser', {'uuidUser': user.id}) }}" class="matrix-btn">
                    [EDIT_MANIFEST]
                </a>
            {% endif %}
        </div>
        
        <div class="card-body p-4">
            <div class="row">
                <div class="col-md-4 text-center mb-4 mb-md-0">
                    <div class="profile-frame">
                        {# The scanline effect over the avatar #}
                        <div class="profile-overlay"></div>
                        <img src="https://ui-avatars.com/api/?name={{ user.email }}&size=200&background=030803&color=00FF41" 
                             class="img-fluid terminal-avatar" alt="Operator_Avatar">
                    </div>
                    <div class="mt-3">
                        <span class="badge-status active-signal">SIGNAL_ACTIVE</span>
                    </div>
                </div>
                
                <div class="col-md-8">
                    <h3 class="terminal-header-sm mb-4">DATA_FIELDS</h3>
                    <table class="table matrix-table borderless-table">
                        <tr>
                            <th class="ps-0 terminal-label-sm">IDENTIFIER:</th>
                            <td class="matrix-glow">{{ user.username }}</td>
                        </tr>
                        <tr>
                            <th class="ps-0 terminal-label-sm">COMMS_LINK:</th>
                            <td>{{ user.email }}</td>
                        </tr>
                        <tr>
                            <th class="ps-0 terminal-label-sm">UID_HASH:</th>
                            <td><small class="user-id">{{ user.id }}</small></td>
                        </tr>
                        <tr>
                            <th class="ps-0 terminal-label-sm">CLEARANCE:</th>
                            <td>
                                {% for role in user.roles %}
                                    <span class="role-badge">{{ role|replace({'ROLE_': ''}) }}</span>
                                {% endfor %}
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="matrix-form-footer p-4 border-top-terminal">
            <a href="{{ path('home') }}" class="action-link view">[ RETURN_TO_BASE ]</a>
        </div>
    </div>
</div>
{% endblock %}